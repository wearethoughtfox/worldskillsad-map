<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title>WorldSkills Abu Dhabi 2017 - 15-18 October 2017</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.40.1/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.40.1/mapbox-gl.css' rel='stylesheet' />
     <script src='https://api.mapbox.com/mapbox.js/plugins/turf/v2.0.2/turf.min.js'></script>
    <style>
        body { margin:0; padding:0; }
        #map { position:absolute; top:0; bottom:0; width:100%; }

        #listings {
          width: 100%;
          position: absolute;
          background:rgba(255,255,255,0.85);
          height: 40vh;
          bottom: 0;
        }

        .active {
          background-color: black;
        }

        @media screen and (min-width: 48em) {
          #listings {
            float: left;
            width: 30%;
            height: 100%;
            max-width:280px;
            min-width: 215px;
            background:rgba(255,255,255,0.85);
            position:absolute;
            top:0;
            bottom:0;
            left:0;
            overflow:auto;
        }
      }


      .listings .item {
        display:block;
        border-bottom:1px solid #eee;
        padding:10px;
        text-decoration:none;
      }

      .listings .item a {
        color: #585858;
        text-decoration: none;
      }

      .active {
        background-color: #62C2D0;
      }

      .active a {
        color: white !important;
        text-decoration: none;
      }

      ::-webkit-scrollbar {
        width: 8px;
        height: 1px;
        border-left: 0;
        background: rgba(0,0,0,0.1);
      }

      ::-webkit-scrollbar-track {
        background: none;
      }

      ::-webkit-scrollbar-thumb {
        background: #000;
        border-radius: 0;
      }


    </style>
</head>
<body>

<div id="map"></div>

  <div id="listings" class="listings">
  </div>

<script>

var skills = {
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "properties": {
        "id": 23,
        "name": "Mobile Robotics",
        "type": "skill",
        "slug": "mobile-robotics",
        "sector": "Manufacturing and Engineering Technology"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              54.435572874036936,
              24.42149792479463
            ],
            [
              54.43583129663453,
              24.421462520246205
            ],
            [
              54.435718471060774,
              24.421151659605176
            ],
            [
              54.435506030114325,
              24.4212107983267
            ],
            [
              54.43556609628853,
              24.421395977357893
            ],
            [
              54.43553964880186,
              24.42140526257941
            ],
            [
              54.435572874036936,
              24.42149792479463
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "id": 19,
        "name": "Industrial Control",
        "type": "skill",
        "slug": "industrial-control",
        "sector": "Manufacturing and Engineering Technology"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              54.4354164656939,
              24.42107613362869
            ],
            [
              54.435667532266976,
              24.421006242334773
            ],
            [
              54.43556710618432,
              24.42073230902361
            ],
            [
              54.43531931172195,
              24.420799366719926
            ],
            [
              54.4354164656939,
              24.42107613362869
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "id": 5,
        "name": "Mechanical Engineering - CAD",
        "type": "skill",
        "slug": "mechanical-engineering",
        "sector": "Manufacturing and Engineering Technology"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              54.43599354536308,
              24.421438293074573
            ],
            [
              54.435900633209044,
              24.42145108241066
            ],
            [
              54.436145499202176,
              24.42141711420952
            ],
            [
              54.436068177908105,
              24.42120328414566
            ],
            [
              54.43583156714594,
              24.42126512800904
            ],
            [
              54.435897686277016,
              24.421448885405262
            ],
            [
              54.43599354536308,
              24.421438293074573
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "id": 16,
        "name": "Electronics",
        "type": "skill",
        "slug": "electronics",
        "sector": "Manufacturing and Engineering Technology"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              54.435829321561116,
              24.42126172997247
            ],
            [
              54.43606593232328,
              24.421199886107424
            ],
            [
              54.43597230000152,
              24.420947347274854
            ],
            [
              54.435738945018905,
              24.421012308091466
            ],
            [
              54.435829321561116,
              24.42126172997247
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "id": 7,
        "name": "CNC Milling",
        "type": "skills",
        "slug": "cnc-milling",
        "sector": "Manufacturing and Engineering Technology"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              54.436379954400486,
              24.42138503833477
            ],
            [
              54.436814292980934,
              24.421326487402343
            ],
            [
              54.43678162605802,
              24.421153533290067
            ],
            [
              54.436710339885316,
              24.421109007184164
            ],
            [
              54.43633535183746,
              24.421160088486342
            ],
            [
              54.436379954400486,
              24.42138503833477
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "id": 6,
        "name": "CNC Turning",
        "type": "skill",
        "slug": "cnc-turning",
        "sector": "Manufacturing and Engineering Technology"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              54.43632358350164,
              24.42110201133344
            ],
            [
              54.43670595176012,
              24.42104988131371
            ],
            [
              54.436751571458494,
              24.420994938595637
            ],
            [
              54.43671511471314,
              24.42081398689962
            ],
            [
              54.436280776132705,
              24.42087253806985
            ],
            [
              54.43632358350164,
              24.42110201133344
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "id": 1,
        "name": "Polymechanics and Automation",
        "type": "skill",
        "slug": "polymechanics-and-automation",
        "sector": "Manufacturing and Engineering Technology"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              54.43681319333703,
              24.42097778444149
            ],
            [
              54.43688122373019,
              24.42101919376614
            ],
            [
              54.437107681022816,
              24.420986326854994
            ],
            [
              54.43706563289213,
              24.420765694162338
            ],
            [
              54.43678114410917,
              24.42080666948372
            ],
            [
              54.43681319333703,
              24.42097778444149
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "id": 43,
        "name": "Plastic Die Engineering",
        "type": "skill",
        "slug": "plastic-die-engineering",
        "sector": "Manufacturing and Engineering Technology"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              54.436880097181586,
              24.421315209551242
            ],
            [
              54.43709684502659,
              24.421283034026494
            ],
            [
              54.43705114861667,
              24.421061405870333
            ],
            [
              54.43689391860856,
              24.4210800303999
            ],
            [
              54.436844708522,
              24.421144018883158
            ],
            [
              54.436880097181586,
              24.421315209551242
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "id": 3,
        "name": "Manufacturing Team Challenge",
        "type": "skill",
        "slug": "manufacturing-team-challenge",
        "sector": "Manufacturing and Engineering Technology"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              54.437320035601566,
              24.421253654270554
            ],
            [
              54.43758753909666,
              24.421216570232712
            ],
            [
              54.43754321292893,
              24.421018329103813
            ],
            [
              54.43728076379518,
              24.421056177966435
            ],
            [
              54.437320035601566,
              24.421253654270554
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "id": 42,
        "name": "Construction Metal Work",
        "type": "skill",
        "slug": "construction-metal-work",
        "sector": "Manufacturing and Engineering Technology"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              54.437672608437815,
              24.421205795726795
            ],
            [
              54.437974811598906,
              24.421160720148777
            ],
            [
              54.437941528479826,
              24.42097881049839
            ],
            [
              54.43789031889275,
              24.420986195645526
            ],
            [
              54.43788482224078,
              24.420945165368313
            ],
            [
              54.43761201092178,
              24.420980027594457
            ],
            [
              54.437624097600214,
              24.421058943079963
            ],
            [
              54.437649115944375,
              24.42106130978878
            ],
            [
              54.43764751564478,
              24.42106154057448
            ],
            [
              54.437672608437815,
              24.421205795726795
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "id": 10,
        "name": "Welding",
        "type": "skill",
        "slug": "welding",
        "sector": "Manufacturing and Engineering Technology"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              54.43801827315057,
              24.42115594606203
            ],
            [
              54.43815295177919,
              24.421138017198675
            ],
            [
              54.43804890286231,
              24.42061529822836
            ],
            [
              54.43791531760818,
              24.420630082122386
            ],
            [
              54.43801827315057,
              24.42115594606203
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "id": 48,
        "name": "Industrial Mechanic Millwright",
        "type": "skill",
        "slug": "industrial-mechanic-millwright",
        "sector": "Manufacturing and Engineering Technology"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              54.43758459728814,
              24.420879200378888
            ],
            [
              54.4379111271129,
              24.42083266207971
            ],
            [
              54.43787414642526,
              24.42065142934814
            ],
            [
              54.437548986667785,
              24.420698874071125
            ],
            [
              54.43758459728814,
              24.420879200378888
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "id": 45,
        "name": "Prototype Modelling",
        "type": "skill",
        "slug": "prototype-modelling",
        "sector": "Manufacturing and Engineering Technology"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              54.43717112321422,
              24.4209730513119
            ],
            [
              54.437530365708675,
              24.420922899353794
            ],
            [
              54.43748405903446,
              24.420705477724272
            ],
            [
              54.437128458422926,
              24.42075565652677
            ],
            [
              54.43717112321422,
              24.4209730513119
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "id": 4,
        "name": "Mechatronics",
        "type": "skill",
        "slug": "mechatronics",
        "sector": "Manufacturing and Engineering Technology"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              54.43572144730814,
              24.42096119690966
            ],
            [
              54.43595703233122,
              24.420900379031554
            ],
            [
              54.43580415290992,
              24.420487566286884
            ],
            [
              54.43557137235826,
              24.420556032893277
            ],
            [
              54.43572144730814,
              24.42096119690966
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "id": 15,
        "name": "Plumbing and Heating",
        "type": "skill",
        "slug": "plumbing-and-heating",
        "sector": "Construction and Building Technology"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              54.43523487532073,
              24.420579059602534
            ],
            [
              54.43548249101825,
              24.420511137888603
            ],
            [
              54.43533401032663,
              24.42011513768156
            ],
            [
              54.435092601988856,
              24.42018484874675
            ],
            [
              54.43523487532073,
              24.420579059602534
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "id": 38,
        "name": "Refrigeration and Air Conditioning",
        "type": "skill",
        "slug": "refrigeration-and-air-conditioning",
        "sector": "Construction and Building Technology"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              54.435043787218746,
              24.420048276689233
            ],
            [
              54.43528829923638,
              24.419979460119105
            ],
            [
              54.43515520740896,
              24.419629557140578
            ],
            [
              54.43491311581766,
              24.41969534049498
            ],
            [
              54.435043787218746,
              24.420048276689233
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "id": 18,
        "name": "Electrical Installations",
        "type": "skill",
        "slug": "electrical-installations",
        "sector": "Construction and Building Technology"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              54.43540394362021,
              24.42011042091029
            ],
            [
              54.43564149356727,
              24.420043950578574
            ],
            [
              54.43549513409352,
              24.41965166950895
            ],
            [
              54.43526333600387,
              24.419717310539763
            ],
            [
              54.43540394362021,
              24.42011042091029
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "id": 2,
        "name": "Information Network Cabling",
        "type": "skill",
        "slug": "information-network-cabling",
        "sector": "Information and Communication Technology"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              54.43485839289623,
              24.419550224744363
            ],
            [
              54.43510336041623,
              24.419484026559758
            ],
            [
              54.435003310449645,
              24.419213914198156
            ],
            [
              54.43476000864518,
              24.419281214477515
            ],
            [
              54.43485839289623,
              24.419550224744363
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "id": 11,
        "name": "Print Media Technology",
        "type": "skill",
        "slug": "print-media-technology",
        "sector": "Information and Communication Technology"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              54.43515434566337,
              24.419429697580437
            ],
            [
              54.43539166785926,
              24.419361917560334
            ],
            [
              54.4353017818591,
              24.419133288818795
            ],
            [
              54.43506998376944,
              24.41919893011924
            ],
            [
              54.43515434566337,
              24.419429697580437
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "id": 17,
        "name": "Web Design and Development",
        "type": "skill",
        "slug": "web-design-development",
        "sector": "Information and Communication Technology"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              54.43524620996684,
              24.419678173061644
            ],
            [
              54.435492387700016,
              24.41961045823987
            ],
            [
              54.435424852634625,
              24.419425582703276
            ],
            [
              54.43517890265264,
              24.41949460695271
            ],
            [
              54.43524620996684,
              24.419678173061644
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "id": 39,
        "name": "IT Network Systems Administration",
        "type": "skill",
        "slug": "it-network-systems-administration",
        "sector": "Information and Communication Technology"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              54.43553461562583,
              24.41959899961846
            ],
            [
              54.435791841571465,
              24.419527007080458
            ],
            [
              54.43571999261302,
              24.419342753554126
            ],
            [
              54.43546874627599,
              24.419415226016994
            ],
            [
              54.43553461562583,
              24.41959899961846
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "id": 9,
        "name": "IT Software Solutions for Business",
        "type": "skill",
        "slug": "it-software-solutions-business",
        "sector": "Information and Communication Technology"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              54.43545414144331,
              24.419378174401356
            ],
            [
              54.43565386468352,
              24.419325143750076
            ],
            [
              54.43556199787136,
              24.41908044198411
            ],
            [
              54.43536516947736,
              24.419136618107714
            ],
            [
              54.43545414144331,
              24.419378174401356
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "id": 40,
        "name": "Graphic Design Technology",
        "type": "skill",
        "slug": "graphic-design-technology",
        "sector": "Information and Communication Technology"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              54.43576419138575,
              24.419293556334136
            ],
            [
              54.43600200287236,
              24.419230044716326
            ],
            [
              54.43590956942452,
              24.418977586197126
            ],
            [
              54.435671999767024,
              24.419042488208678
            ],
            [
              54.43576419138575,
              24.419293556334136
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "id": 50,
        "name": "3D Digital Game Art",
        "type": "skill",
        "slug": "3d-digital-game-art",
        "sector": "Creative Arts and Fashion"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              54.43584648221704,
              24.419514698798366
            ],
            [
              54.43608417278909,
              24.419450492160756
            ],
            [
              54.436015282164234,
              24.419265895840375
            ],
            [
              54.43577847593123,
              24.419330687605598
            ],
            [
              54.43584648221704,
              24.419514698798366
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "id": 34,
        "name": "Cooking",
        "type": "skill",
        "slug": "cooking",
        "sector": "Social and Personal Services"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              54.436310249549095,
              24.419389615387253
            ],
            [
              54.43648023816132,
              24.41934342440934
            ],
            [
              54.436301310082136,
              24.41886220010826
            ],
            [
              54.43613419062196,
              24.41890703504929
            ],
            [
              54.436310249549095,
              24.419389615387253
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "id": 35,
        "name": "Restaurant Service",
        "type": "skill",
        "slug": "restaurant-service",
        "sector": "Social and Personal Services"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              54.436484117003815,
              24.419341922587464
            ],
            [
              54.436651766396665,
              24.419294184083153
            ],
            [
              54.43647432776568,
              24.418815572094847
            ],
            [
              54.43630768806326,
              24.41886316516612
            ],
            [
              54.436484117003815,
              24.419341922587464
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "id": 32,
        "name": "PÃ¢tisserie and Confectionery",
        "type": "skill",
        "slug": "patisserie-and-confectionery",
        "sector": "Social and Personal Services"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              54.43711454644645,
              24.419169955406076
            ],
            [
              54.437392192527454,
              24.419094101901027
            ],
            [
              54.43730959562128,
              24.418875117571087
            ],
            [
              54.437035138530845,
              24.418951453736348
            ],
            [
              54.43711454644645,
              24.419169955406076
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "id": 47,
        "name": "Bakery",
        "type": "skill",
        "slug": "bakery",
        "sector": "Social and Personal Services"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              54.43702236377952,
              24.418913713850802
            ],
            [
              54.43729932000859,
              24.418839844548636
            ],
            [
              54.437213374192595,
              24.418619457874655
            ],
            [
              54.43694226601199,
              24.41869719609655
            ],
            [
              54.43702236377952,
              24.418913713850802
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "id": 51,
        "name": "Freight Forwarding",
        "type": "skill",
        "slug": "freight-forwarding",
        "sector": "Transportation and Logistics"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              54.43730974558858,
              24.41871489934121
            ],
            [
              54.4374221241137,
              24.41868523620168
            ],
            [
              54.437382184533654,
              24.41857614837494
            ],
            [
              54.43727030058121,
              24.418606679024816
            ],
            [
              54.43730974558858,
              24.41871489934121
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "id": 49,
        "name": "Heavy Vehicle Maintenance",
        "type": "skill",
        "slug": "heavy-vehicle-maintenance",
        "sector": "Transportation and Logistics"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              54.43750591073422,
              24.41878387813577
            ],
            [
              54.437856995279695,
              24.4186883509601
            ],
            [
              54.437775608829035,
              24.418470286887445
            ],
            [
              54.43742521039655,
              24.418564954347307
            ],
            [
              54.43750591073422,
              24.41878387813577
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "id": 14,
        "name": "Aircraft Maintenance",
        "type": "skill",
        "slug": "aircraft-maintenance",
        "sector": "Transportation and Logistics"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              54.43792109237103,
              24.418667693117065
            ],
            [
              54.438227815055754,
              24.41858617290041
            ],
            [
              54.43814831731216,
              24.418369358133216
            ],
            [
              54.43784335421425,
              24.418451385659978
            ],
            [
              54.43792109237103,
              24.418667693117065
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "id": 33,
        "name": "Automobile Technology",
        "type": "skill",
        "slug": "automobile-technology",
        "sector": "Transportation and Logistics"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              54.43770746694286,
              24.419008408931717
            ],
            [
              54.43832194021964,
              24.418839948847282
            ],
            [
              54.4382396983327,
              24.418622387156752
            ],
            [
              54.437628301945594,
              24.41878939312221
            ],
            [
              54.43770746694286,
              24.419008408931717
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "id": 13,
        "name": "Autobody Repair",
        "type": "skill",
        "slug": "autobody-repair",
        "sector": "Transportation and Logistics"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              54.438479639856034,
              24.418798228431623
            ],
            [
              54.43903551836064,
              24.41864540959465
            ],
            [
              54.43897731029584,
              24.418488521010996
            ],
            [
              54.438911255005266,
              24.418504404354916
            ],
            [
              54.4388874629369,
              24.418447897679652
            ],
            [
              54.438399788086514,
              24.41857998284778
            ],
            [
              54.438479639856034,
              24.418798228431623
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "id": 36,
        "name": "Car Painting",
        "type": "skill",
        "slug": "car-painting",
        "sector": "Transportation and Logistics"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              54.43838635104061,
              24.418542870275896
            ],
            [
              54.43887387178983,
              24.41840989914253
            ],
            [
              54.438855763359314,
              24.418351664596024
            ],
            [
              54.438920229288705,
              24.4183323778422
            ],
            [
              54.43886089416621,
              24.41817474325857
            ],
            [
              54.43830649927111,
              24.418324624250427
            ],
            [
              54.43838635104061,
              24.418542870275896
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "id": 28,
        "name": "Floristry",
        "type": "skill",
        "slug": "floristry",
        "sector": "Creative Arts and Fashion"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              54.436496692211726,
              24.42014511042135
            ],
            [
              54.437128676487085,
              24.41997216181282
            ],
            [
              54.43708352512327,
              24.419854015109152
            ],
            [
              54.43645291476755,
              24.420028713522434
            ],
            [
              54.436496692211726,
              24.42014511042135
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "id": 31,
        "name": "Fashion Technology",
        "type": "skill",
        "slug": "fashion-technology",
        "sector": "Creative Arts and Fashion"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              54.436551088353674,
              24.420297957530284
            ],
            [
              54.437186202835846,
              24.42012455770805
            ],
            [
              54.437129172263134,
              24.419975011990054
            ],
            [
              54.43649702272909,
              24.4201470105369
            ],
            [
              54.436551088353674,
              24.420297957530284
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "id": 44,
        "name": "Visual Merchandising and Window Dressing",
        "type": "skill",
        "slug": "visual-merchandising",
        "sector": "Creative Arts and Fashion"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              54.43737614419088,
              24.42007281801126
            ],
            [
              54.43766306039861,
              24.41999443244774
            ],
            [
              54.43760723848686,
              24.41984568616085
            ],
            [
              54.4373213656814,
              24.419923921342136
            ],
            [
              54.43737614419088,
              24.42007281801126
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "id": 27,
        "name": "Jewellery",
        "type": "skill",
        "slug": "jewellery",
        "sector": "Creative Arts and Fashion"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              54.43731817551121,
              24.41992065626139
            ],
            [
              54.43760756088369,
              24.419841493941405
            ],
            [
              54.43756289166419,
              24.419725573470842
            ],
            [
              54.43727717884123,
              24.419803126556364
            ],
            [
              54.43731817551121,
              24.41992065626139
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "id": 29,
        "name": "Hairdressing",
        "type": "skill",
        "slug": "hairdressing",
        "sector": "Social and Personal Services"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              54.43771455104539,
              24.419979997360883
            ],
            [
              54.437865754524196,
              24.419939040607716
            ],
            [
              54.43777493987664,
              24.41969572799122
            ],
            [
              54.43762544621155,
              24.41973643824159
            ],
            [
              54.43771455104539,
              24.419979997360883
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "id": 30,
        "name": "Beauty Therapy",
        "type": "skill",
        "slug": "beauty-therapy",
        "sector": "Social and Personal Services"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              54.438048057961495,
              24.41987063730886
            ],
            [
              54.43850412437124,
              24.419747912162105
            ],
            [
              54.43845870692959,
              24.419633581469114
            ],
            [
              54.43800677079052,
              24.41975803570345
            ],
            [
              54.438048057961495,
              24.41987063730886
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "id": 41,
        "name": "Health and Social Care",
        "type": "skill",
        "slug": "health-and-social-care",
        "sector": "Social and Personal Services"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              54.43800289963274,
              24.419750457794624
            ],
            [
              54.43845647550376,
              24.419628091705786
            ],
            [
              54.43840645986078,
              24.419494664679995
            ],
            [
              54.437955768991074,
              24.419618939463934
            ],
            [
              54.43800289963274,
              24.419750457794624
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "id": 26,
        "name": "Carpentry",
        "type": "skill",
        "slug": "carpentry",
        "sector": "Construction and Building Technology"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              54.43396469306364,
              24.418146488883206
            ],
            [
              54.43497793962839,
              24.41787713409039
            ],
            [
              54.43494611154681,
              24.417795008946317
            ],
            [
              54.433945863494976,
              24.418067053257392
            ],
            [
              54.43396469306364,
              24.418146488883206
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "id": 37,
        "name": "Landscape Gardening",
        "type": "skill",
        "slug": "landscape-gardening",
        "sector": "Construction and Building Technology"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              54.43509862575525,
              24.41799121619878
            ],
            [
              54.435330014709564,
              24.41798142833026
            ],
            [
              54.43552313194891,
              24.41793554375484
            ],
            [
              54.43569058700389,
              24.417882262454658
            ],
            [
              54.435872110125054,
              24.417804756956674
            ],
            [
              54.43593310401061,
              24.417761280370765
            ],
            [
              54.43587583958858,
              24.417607235550314
            ],
            [
              54.43575787198291,
              24.417603440465534
            ],
            [
              54.43564664299488,
              24.41762086889718
            ],
            [
              54.435554263719716,
              24.417632804441215
            ],
            [
              54.43545086261564,
              24.417660201616716
            ],
            [
              54.435366546614055,
              24.417683459164166
            ],
            [
              54.43527793357313,
              24.417717046873552
            ],
            [
              54.43518736356123,
              24.4177481423889
            ],
            [
              54.43510884461873,
              24.417787210368562
            ],
            [
              54.43506606813094,
              24.417812800398018
            ],
            [
              54.43504136133322,
              24.417837171658995
            ],
            [
              54.43509862575525,
              24.41799121619878
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "id": 24,
        "name": "Cabinetmaking",
        "type": "skill",
        "slug": "cabinetmaking",
        "sector": "Construction and Building Technology"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              54.43606962591371,
              24.417792918151285
            ],
            [
              54.436419014843345,
              24.417699526593605
            ],
            [
              54.436414307050526,
              24.417672461375183
            ],
            [
              54.436467883805655,
              24.417656411394393
            ],
            [
              54.43638476800733,
              24.417432572515523
            ],
            [
              54.43598008074123,
              24.41754087534137
            ],
            [
              54.43606962591371,
              24.417792918151285
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "id": 25,
        "name": "Joinery",
        "type": "skill",
         "slug": "joinery",
        "sector": "Construction and Building Technology"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              54.43683441469486,
              24.417582742908863
            ],
            [
              54.436747061883,
              24.417334545137276
            ],
            [
              54.43639446518032,
              24.417427012373157
            ],
            [
              54.4364755501538,
              24.41765669297801
            ],
            [
              54.4365348362861,
              24.41763843239158
            ],
            [
              54.43654228107269,
              24.417663715685137
            ],
            [
              54.43683441469486,
              24.417582742908863
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "id": 46,
        "name": "Concrete Construction Work",
        "type": "skill",
        "slug": "concrete-construction-work",
        "sector": "Construction and Building Technology"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              54.438225873072916,
              24.415925610712453
            ],
            [
              54.43878167621856,
              24.415774048047687
            ],
            [
              54.43868897627647,
              24.41552042524402
            ],
            [
              54.43813426803348,
              24.415673382585066
            ],
            [
              54.438225873072916,
              24.415925610712453
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "id": 20,
        "name": "Bricklaying",
        "type": "skill",
        "slug": "bricklaying",
        "sector": "Construction and Building Technology"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              54.437020179031684,
              24.416196176298953
            ],
            [
              54.43792582790529,
              24.415948544824975
            ],
            [
              54.43787024411595,
              24.41580283002425
            ],
            [
              54.43696867185122,
              24.41605216834721
            ],
            [
              54.437020179031684,
              24.416196176298953
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "id": 8,
        "name": "Architectural Stonemasonry",
        "type": "skill",
        "slug": "architectural-stonemasonry",
        "sector": "Construction and Building Technology"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              54.43658976082538,
              24.416349869989983
            ],
            [
              54.43697153065401,
              24.41624593193764
            ],
            [
              54.43692775639991,
              24.416128793126465
            ],
            [
              54.43654676427166,
              24.416233245774905
            ],
            [
              54.43658976082538,
              24.416349869989983
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "id": 22,
        "name": "Painting and Decorating",
        "type": "skill",
        "slug": "painting-and-decorating",
        "sector": "Construction and Building Technology"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              54.435534868107624,
              24.416530128351972
            ],
            [
              54.43625450307196,
              24.416333713706226
            ],
            [
              54.436217886832495,
              24.41623432318564
            ],
            [
              54.435500236625785,
              24.416430451745594
            ],
            [
              54.435534868107624,
              24.416530128351972
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "id": 12,
        "name": "Wall and Floor Tiling",
        "type": "skill",
        "slug": "wall-and-floor-tiling",
        "sector": "Construction and Building Technology"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              54.434722430300376,
              24.416760305033268
            ],
            [
              54.43540117124137,
              24.4165744199117
            ],
            [
              54.43535874867294,
              24.416459193685668
            ],
            [
              54.43467985055458,
              24.416644175352893
            ],
            [
              54.434722430300376,
              24.416760305033268
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "id": 21,
        "name": "Plastering and Drywall Systems",
        "type": "skill",
        "slug": "plastering-and-drywall-systems",
        "sector": "Construction and Building Technology"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              54.43350802454284,
              24.417118755255263
            ],
            [
              54.434601626636734,
              24.41681864126404
            ],
            [
              54.434560412786944,
              24.4167027267009
            ],
            [
              54.433469976789674,
              24.417003753550084
            ],
            [
              54.43350802454284,
              24.417118755255263
            ]
          ]
        ]
      }
    }
  ]
};

mapboxgl.accessToken = 'pk.eyJ1Ijoid29ybGRza2lsbHNhYnVkaGFiaTIwMTciLCJhIjoiY2l0bXJ1cG1uMDAxODJ6cnZoMm9zbGV4MyJ9.kZVapMzP758aCk-FjfUnYQ';
var map = new mapboxgl.Map({
    container: 'map', // container id
    style: 'mapbox://styles/mapbox/light-v9', // stylesheet location
    center: [54.4347,24.4185], // starting position [lng, lat]
    zoom: 16, // starting zoom
    minZoom: 16,
    maxZoom: 19
});

map.on('load', function() {
  map.addLayer({
    id: 'raster-layer',
    type: 'raster',
    source: {
      type: 'raster',
      tiles: ['https://api.mapbox.com/v4/worldskillsabudhabi2017.17cuhnww/{z}/{x}/{y}@2x.png?access_token=pk.eyJ1Ijoid29ybGRza2lsbHNhYnVkaGFiaTIwMTciLCJhIjoiY2l0bXJ1cG1uMDAxODJ6cnZoMm9zbGV4MyJ9.kZVapMzP758aCk-FjfUnYQ'],
    },
    minZoom: 16,
    maxZoom: 20
  });

  map.addLayer({
        'id': 'skills',
        'type': 'fill',
        'source': {
            'type': 'geojson',
            'data': skills,
          },
        'paint': {
            'fill-color': 'rgba(200, 100, 240, 0.4)'
        }
  });

  buildLocationList(skills);
});

map.on('click', 'skills', function (e) {
  var features = map.queryRenderedFeatures(e.point, { layers: ['skills'] });

 if (features.length) {
    var feature = features[0];
    console.log (feature.geometry.coordinates);

    var clickedPoint = turf.center(feature);
    flyToStore(clickedPoint);
    createPopUp(feature);

    var activeItem = document.getElementsByClassName('active');
    if (activeItem[0]) {
      activeItem[0].classList.remove('active');
    }


    var selectedFeature = feature.properties.name;

    for (var i = 0; i < skills.features.length; i++) {
      if (skills.features[i].properties.name === selectedFeature) {
        selectedFeatureIndex = i;
      }
    }

    var listing = document.getElementById('listing-' + selectedFeatureIndex);
    listing.classList.add('active');
  }
});

map.on('mouseenter', 'skills', function () {
  map.getCanvas().style.cursor = 'pointer';
});

// Change it back to a pointer when it leaves.
map.on('mouseleave', 'skills', function () {
  map.getCanvas().style.cursor = '';
});

map.addControl(new mapboxgl.NavigationControl());

function buildLocationList(data) {
  for (i = 0; i < data.features.length; i++) {
    var currentFeature = data.features[i];
    var prop = currentFeature.properties;

    var listings = document.getElementById('listings');
    var listing = listings.appendChild(document.createElement('div'));
    listing.className = 'item';
    listing.id = 'listing-' + i;

    var link = listing.appendChild(document.createElement('a'));
    link.href = '#';
    link.className = 'title';
    link.dataPosition = i;
    link.innerHTML = prop.name;
    var details = listing.appendChild(document.createElement('div'));
    details.innerHTML = prop.sector;

    link.addEventListener('click', function(e) {
      var clickedListing = data.features[this.dataPosition];
      var center = turf.center(clickedListing);
      flyToStore(center);
      createPopUp(clickedListing);

       var activeItem = document.getElementsByClassName('active');
      if (activeItem[0]) {
        activeItem[0].classList.remove('active');
      }
      this.parentNode.classList.add('active');
    });

   }

}

function flyToStore(currentFeature) {
  map.flyTo({
    center: currentFeature.geometry.coordinates,
    zoom: 19
  });
}

function createPopUp(currentFeature) {
  var popUps = document.getElementsByClassName('mapboxgl-popup');
  // Check if there is already a popup on the map and if so, remove it
  if (popUps[0]) popUps[0].remove();

  var center = turf.center(currentFeature);
  var popup = new mapboxgl.Popup({ closeOnClick: false })
    .setLngLat(center.geometry.coordinates)
    .setHTML('<h4>' +  '</h4>' +
      '<h4>' + currentFeature.properties.id + ' - ' +  currentFeature.properties.name + '</h4>' + '<a href="' + currentFeature.properties.slug + '">More information</a>' )
    .addTo(map);
}


</script>

</body>
</html>
